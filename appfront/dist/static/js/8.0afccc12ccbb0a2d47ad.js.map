{"version":3,"sources":["webpack:///src/views/SignUp.vue","webpack:///./src/views/SignUp.vue?fd00","webpack:///./src/views/SignUp.vue"],"names":["SignUp","name","data","_this","this","form","pwd1","pwd2","email","errors","creating","codeDisabled","submitDisabled","submitText","rules","validator","rule","value","callback","Error","trigger","$refs","validateField","length","test","methods","querySearchEmail","queryString","queryList","foreach","item","push","split","filter","createFilter","toLowerCase","indexOf","submitForm","formName","_this2","validate","valid","$axios","post","password","then","rel","Object","prototype","hasOwnProperty","call","setTimeout","$router","$route","query","redirect","catch","error","response","key","concat","console","log","resetForm","resetFields","views_SignUp","render","_vm","_h","$createElement","_c","_self","ref","staticClass","attrs","model","label-width","_v","_l","index","_s","_e","label","prop","prefix-icon","$$v","$set","expression","show-password","fetch-suggestions","trigger-on-focus","directives","rawName","disabled","type","on","click","$event","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/8.0afccc12ccbb0a2d47ad.js","sourcesContent":["<!--===========================================================================\n  = Copyright (C) 2022 Sakuyark, Inc. All Rights Reserved                     =\n  =                                                                           =\n  =   @Time : 2022-6-12 9:20                                                  =\n  =   @Author : hanjin                                                        =\n  =   @Email : 2819469337@qq.com                                              =\n  =   @File : SignUp.vue                                                      =\n  =   @Program: website4                                                      =\n  ===========================================================================-->\n\n<template>\n  <!-- <div class=\"signup\"> -->\n  <el-form\n    ref=\"form\"\n    :model=\"form\"\n    :rules=\"rules\"\n    class=\"signup\"\n    label-width=\"80px\"\n  >\n    <el-form-item>\n      <h3>注册用户</h3>\n    </el-form-item>\n    <div v-if=\"errors.length\" class=\"errors\">\n      <span v-for=\"(error, index) in errors\" :key=\"index\">{{ error }}</span>\n    </div>\n    <el-form-item label=\"用户名\" prop=\"name\">\n      <el-input v-model=\"form.name\" prefix-icon=\"el-icon-user\"/>\n    </el-form-item>\n    <el-form-item label=\"密码\" prop=\"pwd1\">\n      <el-input v-model=\"form.pwd1\" prefix-icon=\"el-icon-lock\" show-password/>\n    </el-form-item>\n    <el-form-item label=\"确认密码\" prop=\"pwd2\">\n      <el-input v-model=\"form.pwd2\" prefix-icon=\"el-icon-lock\" show-password/>\n    </el-form-item>\n    <el-form-item label=\"电子邮件\" prop=\"email\">\n      <el-autocomplete\n        v-model=\"form.email\"\n        :fetch-suggestions=\"querySearchEmail\"\n        :trigger-on-focus=\"false\"\n        class=\"email\"\n        prefix-icon=\"el-icon-message\"\n      />\n    </el-form-item>\n    <!-- el-form-item prop=\"code\" label=\"验证码\">\n      <el-row type=\"flex\" class=\"code-row\">\n        <el-col :span=\"13\">\n          <el-input type=\"tel\" maxlength=\"6\" v-model=\"form.code\"/>\n        </el-col>\n        <el-col :span=\"10\">\n          <el-button\n            plain\n            class=\"getcode\"\n            @click=\"getCode\"\n            :disabled=\"codeDisabled\"\n          >\n            {{ getCodeText }}\n          </el-button>\n        </el-col>\n      </el-row>\n    </el-form-item -->\n    <el-form-item>\n      <el-button\n        v-loading=\"creating\"\n        :disabled=\"submitDisabled\"\n        type=\"primary\"\n        @click=\"submitForm('form')\"\n      >\n        {{ submitText }}\n      </el-button>\n      <el-button @click=\"resetForm('form')\">重置</el-button>\n    </el-form-item>\n  </el-form>\n  <!-- </div> -->\n</template>\n\n<script>\nexport default {\n  name: 'SignUp',\n  data: function () {\n    const checkName = (rule, value, callback) => {\n      if (!value) {\n        callback(new Error('请输入用户名'))\n      }\n      /* this.$axios\n        .post('/api/v1/users/', {name: value})\n        .then((rel) => {\n          if (rel.hasOwnProperty('name')) {\n            callback(new Error(rel.name))\n          } else {\n            callback()\n          }\n        })\n        .catch((error) => {\n          console.log('用户名检查失败 error: ' + error.msg)\n          callback(new Error('请求错误'))\n        })\n      */\n      callback()\n    }\n    const checkPwd1 = (rule, value, callback) => {\n      if (value && this.form.pwd2) {\n        this.$refs.form.validateField('pwd2')\n      }\n      if (!value || value.length < 8) {\n        callback(new Error('密码太短'))\n      } else {\n        callback()\n      }\n    }\n    const checkPwd2 = (rule, value, callback) => {\n      if (!value) {\n        callback(new Error('确认密码不可为空'))\n        return\n      }\n      if (value !== this.form.pwd1) {\n        callback(new Error('密码不匹配'))\n      } else {\n        callback()\n      }\n    }\n    const checkEmail = (rule, value, callback) => {\n      if (!value) callback(new Error('邮箱不可为空'))\n      const reg = /^\\w+((-\\w+)|(\\.\\w+))*@[A-Za-z\\d]+((\\.|-)[A-Za-z\\d]+)*\\.[A-Za-z\\d]+$/\n      if (!reg.test(value)) {\n        callback(new Error('这不是一个邮箱'))\n      }\n      /*\n      this.$axios\n        .post('/api/v1/users/', {email: value})\n        .then((rel) => {\n          if (rel.hasOwnProperty('email')) {\n            callback(new Error(rel.email))\n          } else {\n            callback()\n          }\n        })\n        .catch((error) => {\n          console.log('邮箱检查失败 error: ' + error.msg)\n          callback(new Error('请求错误'))\n        })\n       */\n      callback()\n    }\n\n    return {\n      form: {\n        name: '',\n        pwd1: '',\n        pwd2: '',\n        email: ''\n      },\n      errors: [],\n      creating: false,\n      codeDisabled: false,\n      submitDisabled: false,\n      submitText: '创建账户',\n      rules: {\n        name: { validator: checkName, trigger: 'blur' },\n        pwd1: { validator: checkPwd1, trigger: 'blur' },\n        pwd2: { validator: checkPwd2, trigger: 'blur' },\n        email: { validator: checkEmail, trigger: 'blur' }\n      }\n    }\n  },\n  methods: {\n    querySearchEmail (queryString, callback) {\n      const emailList = [\n        { value: '@qq.com' },\n        { value: '@126.com' },\n        { value: '@163.com' },\n        { value: '@sina.com' },\n        { value: '@21cn.com' },\n        { value: '@sohu.com' },\n        { value: '@yahoo.com.cn' },\n        { value: '@tom.com' },\n        { value: '@etang.com' },\n        { value: '@eyou.com' },\n        { value: '@56.com' },\n        { value: '@x.cn' },\n        { value: '@chinaren.comsogou.com' },\n        { value: '@citiz.com' }\n      ]\n      let results = []\n      const queryList = []\n      emailList.foreach((item) => {\n        queryList.push({ value: queryString.split('@')[0] + item.value })\n      })\n      results = queryString\n        ? queryList.filter(this.createFilter(queryString))\n        : queryList\n      callback(results)\n    },\n    createFilter (queryString) {\n      return (item) => {\n        return item.value.toLowerCase().indexOf(queryString.toLowerCase()) === 0\n      }\n    },\n    submitForm (formName) {\n      this.$refs[formName].validate((valid) => {\n        // console.log(valid)\n        if (valid) {\n          this.creating = true\n          this.submitText = '正在创建'\n          this.$axios\n            .post('/api/v1/users/', {\n              name: this.form.name,\n              email: this.form.email,\n              password: this.form.pwd2\n            })\n            .then((rel) => {\n              this.creating = false\n              const data = rel.data\n              if (Object.prototype.hasOwnProperty.call(data, 'uuid')) {\n                this.submitText = '创建成功，正在跳转登录...'\n                setTimeout(() => {\n                  this.$router.push('/login' + (this.$route.query.redirect || ''))\n                }, 3000)\n              }\n            })\n            .catch((error) => {\n              const data = error.response.data\n              let errors = []\n              if (typeof (data) === 'string') {\n                errors.push(data)\n              } else {\n                for (const key in data) {\n                  errors = errors.concat(data[key])\n                }\n              }\n              this.errors = errors\n              this.creating = false\n              console.log(this.errors)\n              this.submitText = '创建失败'\n              this.submitDisabled = true\n              setTimeout(() => {\n                this.submitText = '重新创建'\n                this.submitDisabled = false\n              }, 3000)\n            })\n        } else {\n          return false\n        }\n      })\n    },\n    resetForm (formName) {\n      this.$refs[formName].resetFields()\n    }\n  }\n}\n</script>\n\n<style scoped>\n@media screen and (min-width: 750px) {\n  .signup {\n    width: 50%;\n    padding: 50px 50px 30px;\n    margin: 15px auto;\n  }\n}\n\n@media screen and (max-width: 450px) {\n  .signup {\n    width: 98%;\n    padding: 20px 10px;\n    margin: 15px auto;\n  }\n}\n\n.signup {\n  border-radius: 5px;\n  border: 3px solid #b4bccc;\n  max-width: 450px;\n}\n\n.email {\n  width: 100%;\n}\n\n.errors {\n  width: 100%;\n  /*margin-bottom: 22px;*/\n  /*padding: 5px 5%;*/\n  /*background-color: #ba3131;*/\n  /*color: #fff;*/\n  color: #ba3131;\n}\n\n.errors > span {\n  display: block;\n  margin-bottom: 10px;\n  text-align: center;\n  font-size: 14px;\n}\n\n.errors > span:last-child {\n  margin-bottom: 0;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/SignUp.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-form',{ref:\"form\",staticClass:\"signup\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-width\":\"80px\"}},[_c('el-form-item',[_c('h3',[_vm._v(\"注册用户\")])]),_vm._v(\" \"),(_vm.errors.length)?_c('div',{staticClass:\"errors\"},_vm._l((_vm.errors),function(error,index){return _c('span',{key:index},[_vm._v(_vm._s(error))])}),0):_vm._e(),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"prefix-icon\":\"el-icon-user\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"pwd1\"}},[_c('el-input',{attrs:{\"prefix-icon\":\"el-icon-lock\",\"show-password\":\"\"},model:{value:(_vm.form.pwd1),callback:function ($$v) {_vm.$set(_vm.form, \"pwd1\", $$v)},expression:\"form.pwd1\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"确认密码\",\"prop\":\"pwd2\"}},[_c('el-input',{attrs:{\"prefix-icon\":\"el-icon-lock\",\"show-password\":\"\"},model:{value:(_vm.form.pwd2),callback:function ($$v) {_vm.$set(_vm.form, \"pwd2\", $$v)},expression:\"form.pwd2\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"电子邮件\",\"prop\":\"email\"}},[_c('el-autocomplete',{staticClass:\"email\",attrs:{\"fetch-suggestions\":_vm.querySearchEmail,\"trigger-on-focus\":false,\"prefix-icon\":\"el-icon-message\"},model:{value:(_vm.form.email),callback:function ($$v) {_vm.$set(_vm.form, \"email\", $$v)},expression:\"form.email\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.creating),expression:\"creating\"}],attrs:{\"disabled\":_vm.submitDisabled,\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('form')}}},[_vm._v(\"\\n      \"+_vm._s(_vm.submitText)+\"\\n    \")]),_vm._v(\" \"),_c('el-button',{on:{\"click\":function($event){return _vm.resetForm('form')}}},[_vm._v(\"重置\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1449258d\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/SignUp.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1449258d\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./SignUp.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./SignUp.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./SignUp.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1449258d\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./SignUp.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1449258d\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/SignUp.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}